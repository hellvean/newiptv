var WochengSDK = function () {
    function p() {
        var b = null;
        if (window.XMLHttpRequest) b = new XMLHttpRequest, b.overrideMimeType && b.overrideMimeType("text/xml"); else if (window.ActiveXObject) try {
            b = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (f) {
            try {
                b = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (d) {
            }
        }
        return b
    }

    function F(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u68c0\u67e5\u9274\u6743\u7f51\u7edcurl:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 ==
                    a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1); else if (t++, t == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0); else {
                    var g = b.replace(vacIP[t - 1], vacIP[t]);
                    c(g);
                    F(g, f, d)
                }
            };
            a.send()
        }
    }

    function G(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u68c0\u67e5\u9274\u6743\u7f51\u7edcurl:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1); else if (u++, u == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"),
                    d(0); else {
                    var g = b.replace(vacIP[u - 1], vacIP[u]);
                    c(g);
                    G(g, f, d)
                }
            };
            a.send()
        }
    }

    function H(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u7528\u6237\u8ba2\u5355\u4fe1\u606f\u67e5\u8be2url:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (v++, v == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(vacIP[v - 1],
                        vacIP[v]);
                    c(g);
                    H(g, f, d)
                }
            };
            a.send()
        }
    }

    function J(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u9000\u8ba2url:" + b);
            a.open("POST", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[POST\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (w++, w == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(vacIP[w - 1], vacIP[w]);
                    c(g);
                    x(g, f, d)
                }
            };
            a.send()
        }
    }

    function x(b, f, d) {
        var a = p();
        if (null !=
            a) {
            c("\u8ba2\u8d2d\u8bb0\u5f55\u67e5\u8be2url:" + b);
            a.open("GET", b, f);
            var e = setTimeout(function () {
                a.abort()
            }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (q++, q == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(vacIP[q - 1], vacIP[q]);
                    c(g);
                    x(g, f, d)
                }
            };
            a.send()
        }
    }

    function I(b, f, d) {
        var a = p();
        if (null != a) {
            c("\u9274\u6743url:" + b);
            a.open("GET", b, f);
            var e =
                setTimeout(function () {
                    a.abort()
                }, 1E4);
            a.onreadystatechange = function () {
                if (4 == a.readyState) if (200 == a.status) clearTimeout(e), c("[Get\u8bf7\u6c42\u6210\u529f]"), d(1, a.responseText); else if (r++, r == vacIP.length) c("ip\u5207\u6362\u7ed3\u675f"), d(0, '{"result":0,"errcode":"301"}'); else {
                    var g = b.replace(vacIP[r - 1], vacIP[r]);
                    c(g);
                    I(g, f, d)
                }
            };
            a.send()
        }
    }

    function A(b, f, d, a) {
        var e = p();
        if (null != e) {
            c("\u8ba1\u8d39url\uff1a" + b);
            e.open("POST", b, d);
            var g = setTimeout(function () {
                e.abort()
            }, 1E4);
            e.onreadystatechange = function () {
                c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 xmlHttp.readyState:" +
                    e.readyState);
                c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 xmlHttp.status:" + e.status);
                if (4 == e.readyState) if (200 == e.status) {
                    clearTimeout(g);
                    c("[\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42post\u8bf7\u6c42\u6210\u529f]");
                    var k = e.responseXML;
					console.log(e.responseXML)
                    k.getElementsByTagName("flag") ? (y = k.getElementsByTagName("flag")[0].childNodes[0].nodeValue, c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42flag :" + y + "--URL:" + b), k = "http://payIP/webpay/pay_options".replace(/payIP/, payIP[l]) + "?flag=" + y, a(1, "success"), window.location = k) : (l++, l == payIP.length ?
                        (c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 \u7b2c\u4e00\u4e8c\u6b65\u90fd\u5931\u8d25 A"), a(0, "out of service")) : (k = b.replace(payIP[l - 1], payIP[l]), A(k, f, d, a)))
                } else l++, l == payIP.length ? (c("\u53d1\u9001\u8ba1\u8d39\u8bf7\u6c42 \u7b2c\u4e00\u4e8c\u6b65\u90fd\u5931\u8d25 B"), a(0, "out of service")) : (k = b.replace(payIP[l - 1], payIP[l]), A(k, f, d, a))
            };
            e.send(f)
        }
    }

    function z(b, f, d, a) {
        var e = p();
        if (null != e) {
            e.open("POST", b, d);
            var g = setTimeout(function () {
                e.abort()
            }, 1E4);
            e.onreadystatechange = function () {
                if (4 == e.readyState) if (200 ==
                    e.status) {
                    clearTimeout(g);
                    c("[\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42post\u8bf7\u6c42\u6210\u529f]");
                    var k = e.responseText;
                    c("OrderProduct\u54cd\u5e94\u6570\u636e\uff1a" + k);
                    var h = eval("(" + k + ")");
                    if (1 == h.result) c("\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42:" + h.result), c("\u53d1\u9001\u9274\u6743\u8ba2\u5355\u8bf7\u6c42:" + h.orderId), a(1, h.orderId); else {
                        var l = h.errCode;
                        h = h.payType;
                        if ("undefined" == typeof h || null == h || "undefined" == h || "0" == h) h = "4";
                        304 == l ? (c("\u91cd\u590d\u8ba2\u8d2d"), c(h),
                            a(0, '{"errCode": "304", "payType": ' + h + "}")) : (n++, n == vacIP.length ? (c("ip\u5207\u6362\u7ed3\u675f"), a(0, k)) : (k = b.replace(vacIP[n - 1], vacIP[n]), z(k, f, d, a)))
                    }
                } else n++, n == vacIP.length ? (c("ip\u5207\u6362\u7ed3\u675f"), a(0, '{"errCode": "500"}')) : (k = b.replace(vacIP[n - 1], vacIP[n]), z(k, f, d, a))
            };
            e.send(f)
        }
    }

    var l = 0, r = 0, n = 0, q = 0, w = 0, v = 0, t = 0, u = 0, y, c = function (b) {
        console.log(b)
    };
    this.doOrderProduct = function (b, f, d, a, e, g, k, h, p, t, u, v, w, q, r, x, y, B, C, D, E, m) {
        b || (b = "unknown");
        f || (f = "unknown");
        d ? a ? e ? g ? k ? h ? (q || (q = "unknown"),
        r || (r = "unknown"), x || (x = "unknown"), y ? B ? C ? D ? E ? (c("payVersion:" + y), c("payChannelId:" + B), c("payAppId:" + C), c("payAppName:" + D), c("payUA:" + E), n = 0, b = "http://vacIP/api/v1.0/buyOrder".replace(/vacIP/, vacIP[n]) + "/" + b + "/" + a + "/" + e + "/" + d + "/" + f + "/" + q + "/" + r + "?platform=" + x + "&cooperatorOrder=" + t, c("\u4e0b\u8ba2\u5355:" + b), z(b, null, !0, function (a, b) {
            c("\u54cd\u5e94\uff1a" + a);
            c("\u54cd\u5e94\uff1a" + b);
            1 == a ? (a = '<?xml version="1.0" encoding="UTF-8"?><request><body><Version>' + y + "</Version><ChannelId>" + B + "</ChannelId><AppId>" +
                C + "</AppId><AppName>" + D + "</AppName><PropName>" + e + "</PropName><PropPrice>" + g + "</PropPrice><ExData>" + b + "</ExData><UA>" + E + "</UA><redirecturl>" + k + "</redirecturl><failurl>" + h + "</failurl><broadbandid>" + p + "</broadbandid><AccessType>url</AccessType><param1>" + d + "</param1><param2>" + t + "</param2><param3>" + u + "</param3><param4>" + v + "</param4><param5>" + w + "</param5></body></request>", c("\u6253\u5f00\u8ba1\u8d39\u9875\u9762\u62fc\u63a5:" + a), l = 0, A("http://payIP/webpay/pay".replace(/payIP/, payIP[l]), a, !0, m)) : (c(b),
                a = eval("(" + b + ")"), b = a.errCode, "undefined" != typeof b && null != b && "304" == b ? (a = a.payType, k = k.replace(/\*/g, "&"), window.location = k + "&payType=" + a) : m(0, "order Product error"))
        })) : m(0, "payUA error") : m(0, "payAppName error") : m(0, "payAppId error") : m(0, "payChannelId error") : m(0, "payVersion error")) : m(0, "failUrl error") : m(0, "redirectUrl error") : m(0, "price error") : m(0, "contentName error") : m(0, "contentId error") : m(0, "customerId error")
    };
    this.doGetProducts = function (b, c, d, a, e, g) {
        if (b) if (c) {
            d || (d = ["unknown"]);
            a || (a =
                "unknown");
            e || (e = ["unknown"]);
            for (var f = "", h = 0; h < d.length; h++) f = h == d.length - 1 ? f + d[h] : f + (d[h] + "-");
            d = "";
            for (h = 0; h < e.length; h++) d = h == e.length - 1 ? d + e[h] : d + (e[h] + "-");
            r = 0;
            e = "http://vacIP/api/v1.0/product".replace(/vacIP/, vacIP[r]);
            I(e + "?contentId=" + b + "&customerId=" + c + "&productId=" + f + "&userCode=" + a + "&productIdThird=" + d, !0, g)
        } else g(0, "customerId error"); else g(0, "contentId is empty")
    };
    this.doListUserOrders = function (b, c) {
        if (b) {
            q = 0;
            var d = "http://vacIP/api/v1.0/order/".replace(/vacIP/, vacIP[q]);
            x(d + b, !0, c)
        } else c(0, "customerId error")
    };
    this.doUnsubscribe = function (b, c, d, a, e, g) {
        if (b) if (c || (c = "unknown"), d) {
            a || (a = "unknown");
            e || (e = "unknown");
            w = 0;
            var f = "http://vacIP/api/v1.0/manager/unsubscribe/".replace(/vacIP/, vacIP[w]);
            J(f + b + "/" + d + "/" + c + "/" + a + "/" + e, !0, g)
        } else g(0, "contentId error"); else g(0, "customerId error")
    };
    this.doGetOrderInfo = function (b, c, d) {
        if (b) if (c) {
            v = 0;
            var a = "http://vacIP/api/v1.0/order/user/".replace(/vacIP/, vacIP[v]);
            H(a + b + "/" + c, !0, d)
        } else d(0, "orderId error"); else d(0,
            "customerId error")
    };
    this.doZeroOrder = function (b, f, d, a, e, g, k, h, l) {
        b || (b = "unknown");
        f || (f = "unknown");
        d ? a ? e ? g ? (k || (k = "unknown"), h || (h = "unknown"), n = 0, b = "http://vacIP/api/v1.0/buyOrder/zeroJL".replace(/vacIP/, vacIP[n]) + "/" + b + "/" + a + "/" + e + "/" + d + "/" + f + "/" + k + "/" + h, c("\u96f6\u5143\u8d2d:" + b), z(b, null, !0, function (a, b) {
            1 == a ? l(1, "order success") : l(0, "order Product error")
        })) : l(0, "price error") : l(0, "contentName error") : l(0, "contentId error") : l(0, "customerId error")
    };
    this.doCheckNetwork = function (b) {
        t = 0;
        F("http://vacIP/api/v1.0/order/111".replace(/vacIP/,
            vacIP[t]), !0, function (f) {
            1 == f ? (u = 0, G("http://payIP/webpay/serverMonitor".replace(/payIP/, payIP[u]), !0, function (d) {
                1 == d ? (c("\u7f51\u7edc\u6b63\u5e38"), b(1)) : b(0)
            })) : b(0)
        })
    }
}, sdk = new WochengSDK;